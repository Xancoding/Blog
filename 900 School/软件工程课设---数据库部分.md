# 原型设计
开始时间：周一下午 5:04
形式：每组8分钟，全员参加。展示墨刀，此阶段无需撰写文档，展示的同时阐述：
（1）功能及其对应的界面
（2）计划采用的开发语言
（3）关键数据与数据表设计的总体想法
（4）计划的开发分工  前端（咨询者+咨询师） + 后端
# 课设要求
需求场景：心理咨询信息发布与预约系统

设计并实现一个心理咨询信息发布与预约系统，具体需求包括但不限于以下功能：

（1）实现心理咨询师、咨询者两种角色的用户注册功能；

（2）每次咨询时间固定为50分钟，自行设计可选时间段，心理咨询师可从可选时间段中，选择自己可接受咨询的时间，支持设置周期性时间、支持取消已选时间；

（3）咨询者可查看咨询师的信息、咨询师的可选咨询时间，并发起预约申请。申请提交后，需咨询师确认，方可建立预约。同一咨询者可在同一时间段向多个咨询师提交申请，预约建立后，该时间段其他申请自动取消。

（4）预约建立后，咨询师或咨询者均可发起取消预约申请，仅当另一方同意取消预约后，预约方可被取消。

（5）咨询师与咨询者均可在后台查看个人的咨询历史。

# 状态图
![咨询者状态图.png](https://bu.dusays.com/2023/10/15/652b6a698a931.png)

![咨询师状态图.png](https://bu.dusays.com/2023/10/15/652b67174d4c1.png)

![](https://bu.dusays.com/2023/11/16/6555b7b705bca.png)

# 需求分析
心理咨询信息发布与预约系统 数据库中有 **3** 个实体集
1. “咨询师” 实体集，属性有 **医师编号(账号)**、性别、姓名、地区、微信、电话、咨询经验（小时）、邮箱、收费标准（RMB/小时）、写给来访者、<u>擅长领域</u>、<u>咨询方式</u>、<u>**咨询时间**</u>
	1. 擅长领域 用 7 位二进制存储，分别是 情绪困扰、家庭困扰、学业职场、人际关系、亲密关系、心理健康、个人成长
	2. 咨询方式 用 4 位二进制存储，分别是 面对面咨询、视频咨询、文字咨询、电话咨询
	3. 咨询时间 用 10 位 二进制存储  示例：1100000000，表示 周一上午和下午是有空的
2. “咨询者” 实体集，属性有 **账号**、密码、姓名、微信、电话、QQ、邮箱

实体集之间的关系为：
1. **咨询师** 与 **咨询者** 之间是 多对多 关系，**咨询者** 咨询 **咨询师**

# ER图
![image.png](https://bu.dusays.com/2023/10/15/652b66d5d6226.png)

# 关系模式

咨询者==counselee==(**咨询者编号cno（自增）**、密码password、QQ、==用户编号user_id==) 

咨询师==counselor==(**咨询师编号dno（自增）**、性别gender、地区area、咨询经验（小时）experience、收费标准（RMB/小时）charge、写给来访者motto、<u>擅长领域merit</u>、<u>咨询方式method</u>、<u>咨询时间time</u>、==用户编号user_id==) 

咨询记录==record==(**预约编号rno（自增）**、==来访者编号cno==、==医师编号dno==、预约时间time、咨询是否已完成history、咨询状态state)

用户==User==(**用户编号user_id（自增）**、用户名user_name、手机号phone_number（账号）、密码password、微信wechat、邮箱email)

- 医师编号 的被参照表是 咨询师
- 来访者编号 的被参照表是 咨询者
- 咨询状态 6 个
- 咨询记录作为基本表，上面建立三个视图
	1. 咨询者——我的咨询：**预约编号**、==医师编号==、医师姓名、预约时间、咨询者的预约状态(等待对方通过、通过、拒绝、对方申请取消、等待对方同意取消)
	2. 咨询师——我的咨询：**预约编号**、==来访者编号==、来访者姓名、预约时间、咨询师的预约状态(等待审核、通过、拒绝、等待对方同意取消、对方申请取消)
	3. 历史记录，属性 有 **预约编号**、==医师编号(账号)==、==来访者编号(账号)==、预约时间、历史记录状态（咨询成功、咨询失败）（空表示还不是历史记录）（0失败、1成功）
		1. 如果是 咨询者 请求，给出 **预约编号**、==医师编号==、医师姓名、预约时间、咨询者的预约状态
		2. 如果是 咨询师 请求，给出 **预约编号**、来访者姓名、预约时间、咨询师的预约状态

# MySQL 如何保存复选框中的数据
在 MySQL 中，可以使用 ENUM 或 SET 类型来存储复选框的数据。

ENUM 类型是一种特殊的字符串类型，允许存储一组固定的字符串值，这些值可以作为选项显示在复选框中。例如，如果你想存储一个人的性别，可以定义一个 ENUM 类型的字段：

```sql
CREATE TABLE people (
  name VARCHAR(100),
  gender ENUM('male', 'female', 'other')
);
```


SET 类型与 ENUM 类型类似，但它允许存储多个字符串值，这些值可以同时选择。例如，如果你想存储一个人的兴趣，可以定义一个 SET 类型的字段：

```sql
CREATE TABLE people (
  name VARCHAR(100),
  interests SET('sports', 'reading', 'traveling', 'music')
);
```


当你插入数据时，可以使用字符串值或字符串值的列表来指定复选框的选择情况：

```sql
INSERT INTO people (name, gender) VALUES ('John Doe', 'male');
INSERT INTO people (name, interests) VALUES ('Jane Doe', 'sports,reading');
```


通过使用 ENUM 或 SET 类型，可以方便地存储复选框的数据，并在查询数据时对其进行筛选。